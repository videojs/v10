---
import { SITE_TITLE } from '@/consts';
import Base from '@/layouts/Base.astro';
---

<script>
  // Attempt to close the window automatically
  function closeWindow() {
    // Signal to parent window that auth is complete
    if (window.opener) {
      try {
        window.opener.postMessage({ type: 'success' }, window.location.origin);
      } catch (e) {
        console.error('Failed to notify parent window:', e);
      }
    }

    // Close the popup
    window.close();
  }

  // Close automatically after a brief delay
  setTimeout(closeWindow, 1000);
</script>

<Base title={`Authentication Success | ${SITE_TITLE}`} description="Authentication successful">
  <div class="flex items-center justify-center h-screen flex-col">
    <h1 class="text-h4 md:text-h1 text-balance lg:text-pretty">Authentication Successful</h1>
    <p class="md:text-lg text-balance max-w-100">You may close this window...</p>
  </div>
</Base>
