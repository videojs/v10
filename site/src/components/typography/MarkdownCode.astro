---
import type { HTMLTag, Polymorphic } from 'astro/types';
import { twMerge } from 'tailwind-merge';

import { shared } from './styles';

type Props<Tag extends HTMLTag = 'code'> = Polymorphic<{ as: Tag }> & {
  class?: string;
  codeBlock?: string;
};

const { as: Tag = 'code', class: className, codeBlock, ...props } = Astro.props;

// When codeBlock="true", render plain code tag (Shiki handles styling)
// Otherwise, render inline code with styling
const isCodeBlock = codeBlock === 'true';
---

{
    isCodeBlock ? (
        <Tag class={twMerge(shared.codeBlock, className)} {...props}>
            <slot />
        </Tag>
    ) : (
        <Tag class={twMerge(shared.code, className)} {...props}>
            <slot />
        </Tag>
    )
}
